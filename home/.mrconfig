[DEFAULT]
git_gc = git gc "$@"
jobs = 10
# git_dum 'diff upstream/master'
git_dum = git diff --name-status upstream/master 2> /dev/null || true

# homes[h]ick repos

[.homesick/repos/homeshick]
checkout =
	git clone 'git@github.com:tomhoover/homeshick.git' 'homeshick'
	cd "$MR_REPO"
	git remote add upstream git://github.com/andsens/homeshick.git
order = 5

[.homesick/repos/mr-castle]
checkout = git clone 'git@github.com:tomhoover/mr-castle.git' 'mr-castle'
fixups =
	~/.homesick/repos/homeshick/bin/homeshick link

[.homesick/repos/dotfiles-castle]
checkout = git clone 'git@github.com:tomhoover/dotfiles-castle.git' 'dotfiles-castle'
fixups =
	~/.homesick/repos/homeshick/bin/homeshick link
	chmod -R go= ~/.config
	cd "$MR_REPO"
	[ home/.config/crontab/`hostname -s`.crontab -nt /etc/crontab ] && sudo cp home/.config/crontab/`hostname -s`.crontab /etc/crontab || true
	[ -f home/.config/crontab/`hostname -s`.`whoami`.crontab ] && crontab home/.config/crontab/`hostname -s`.`whoami`.crontab || true

[.homesick/repos/private-castle]
checkout = git clone 'tom@manuel:git/private-castle.git' 'private-castle'
fixups =
	~/.homesick/repos/homeshick/bin/homeshick link
	chmod -R go= ~/.config

# common repos

[bin]
checkout = git clone 'git@github.com:tomhoover/bin.git' 'bin'

[src/bootstrap]
checkout = git clone 'git@github.com:tomhoover/bootstrap.git' 'bootstrap'

[src/dotfiles]
checkout = git clone 'git@github.com:tomhoover/dotfiles.git' 'dotfiles'

[src/jekyll-tomhoover]
checkout =
	git clone 'git@github.com:tomhoover/jekyll-tomhoover.git' 'jekyll-tomhoover'
	cd "$MR_REPO"
	git remote add upstream git://github.com/mmistakes/so-simple-theme.git

[src/tomhoover.github.io]
checkout = git clone 'git@github.com:tomhoover/tomhoover.github.io.git' 'tomhoover.github.io'

[src/z]
checkout =
	git clone 'git@github.com:tomhoover/z.git' 'z'
	cd "$MR_REPO"
	git remote add upstream git://github.com/rupa/z.git
#fixups =
#	sudo ln -sf "$MR_REPO/z.1" /usr/local/share/man/man1/z.1

[src/liquidprompt]
checkout =
	git clone 'git@github.com:tomhoover/liquidprompt.git' 'liquidprompt'
	cd "$MR_REPO"
	git remote add upstream git://github.com/nojhan/liquidprompt.git

# read-only repos

[.oh-my-zsh]
checkout = git clone 'https://github.com/robbyrussell/oh-my-zsh.git' '.oh-my-zsh'
skip = ([ "$1" = update ] && ! hours_since "$1" 12)
push = echo "not pushing this one, read-only"

# system/host-specific repos

include = cat ~/.config/mr/vim.mrconfig 2>/dev/null || true
include = cat ~/.config/mr/`uname`.mrconfig 2>/dev/null || true
include = cat ~/.config/mr/`hostname -s`.mrconfig 2>/dev/null || true
